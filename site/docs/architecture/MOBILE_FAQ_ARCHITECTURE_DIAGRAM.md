# Mobile FAQ Component Architecture

```
┌─────────────────────────────────────────────────────────────────────┐
│                          FAQSection.tsx                             │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ <section className="py-20 sm:py-24 bg-cosmic-950/50">        │  │
│  │   <div className="w-full">                                    │  │
│  │     <h2 className="px-4 sm:px-6">Vragen over onze Diensten</h2>│  │
│  │                                                                │  │
│  │     {children} ────────────────────────────────────────────┐  │  │
│  │   </div>                                                    │  │  │
│  │ </section>                                                  │  │  │
│  └─────────────────────────────────────────────────────────────┘  │  │
└─────────────────────────────────────────────────────────────────────┘
                                                                    │
                                                                    ▼
┌─────────────────────────────────────────────────────────────────────┐
│                       DutchMarketFAQ.tsx                            │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ <div className="w-full max-w-none px-4 sm:px-5               │  │
│  │              md:max-w-2xl md:mx-auto">                        │  │
│  │                                                                │  │
│  │   ┌────────────────────────────────────────────────────────┐  │  │
│  │   │ Category: "Business Growth"                            │  │  │
│  │   │ <h3 className="sticky top-20 ...">                     │  │  │
│  │   └────────────────────────────────────────────────────────┘  │  │
│  │                                                                │  │
│  │   ┌────────────────────────────────────────────────────────┐  │  │
│  │   │              Accordion.tsx                             │  │  │
│  │   │  ┌──────────────────────────────────────────────────┐  │  │  │
│  │   │  │ AccordionContext.Provider                        │  │  │  │
│  │   │  │   value={{ openItemId, toggleItem }}             │  │  │  │
│  │   │  │                                                   │  │  │  │
│  │   │  │   <div className="w-full divide-y               │  │  │  │
│  │   │  │                    divide-white/10">             │  │  │  │
│  │   │  │                                                   │  │  │  │
│  │   │  │     ┌─────────────────────────────────────────┐  │  │  │  │
│  │   │  │     │        AccordionItem.tsx (id="bg-1")    │  │  │  │  │
│  │   │  │     │  ┌───────────────────────────────────┐  │  │  │  │  │
│  │   │  │     │  │ <h4>                              │  │  │  │  │  │
│  │   │  │     │  │   <button                         │  │  │  │  │  │
│  │   │  │     │  │     data-faq-trigger              │  │  │  │  │  │
│  │   │  │     │  │     aria-expanded={isOpen}        │  │  │  │  │  │
│  │   │  │     │  │     aria-controls="panel-bg-1"    │  │  │  │  │  │
│  │   │  │     │  │     className="min-h-[48px] ..."> │  │  │  │  │  │
│  │   │  │     │  │                                    │  │  │  │  │  │
│  │   │  │     │  │     ┌─────────────────────────┐   │  │  │  │  │  │
│  │   │  │     │  │     │ Question text           │   │  │  │  │  │  │
│  │   │  │     │  │     │ "Hoe zorgt..."          │   │  │  │  │  │  │
│  │   │  │     │  │     └─────────────────────────┘   │  │  │  │  │  │
│  │   │  │     │  │                                    │  │  │  │  │  │
│  │   │  │     │  │     ┌─────────────────────────┐   │  │  │  │  │  │
│  │   │  │     │  │     │ Icon (Plus/Minus)       │   │  │  │  │  │  │
│  │   │  │     │  │     │ 44x44px touch target    │   │  │  │  │  │  │
│  │   │  │     │  │     └─────────────────────────┘   │  │  │  │  │  │
│  │   │  │     │  │   </button>                       │  │  │  │  │  │
│  │   │  │     │  │ </h4>                             │  │  │  │  │  │
│  │   │  │     │  └───────────────────────────────────┘  │  │  │  │  │
│  │   │  │     │                                         │  │  │  │  │
│  │   │  │     │  ┌───────────────────────────────────┐  │  │  │  │  │
│  │   │  │     │  │ <div                              │  │  │  │  │  │
│  │   │  │     │  │   id="panel-bg-1"                 │  │  │  │  │  │
│  │   │  │     │  │   role="region"                   │  │  │  │  │  │
│  │   │  │     │  │   style={{ height: measured }}    │  │  │  │  │  │
│  │   │  │     │  │   className="transition-[height   │  │  │  │  │  │
│  │   │  │     │  │              ,opacity] duration-  │  │  │  │  │  │
│  │   │  │     │  │              150 motion-reduce:   │  │  │  │  │  │
│  │   │  │     │  │              transition-none">    │  │  │  │  │  │
│  │   │  │     │  │                                    │  │  │  │  │  │
│  │   │  │     │  │   ┌─────────────────────────┐     │  │  │  │  │  │
│  │   │  │     │  │   │ Answer text             │     │  │  │  │  │  │
│  │   │  │     │  │   │ <p>{answer}</p>         │     │  │  │  │  │  │
│  │   │  │     │  │   └─────────────────────────┘     │  │  │  │  │  │
│  │   │  │     │  │                                    │  │  │  │  │  │
│  │   │  │     │  │   ┌─────────────────────────┐     │  │  │  │  │  │
│  │   │  │     │  │   │ Keywords (optional)     │     │  │  │  │  │  │
│  │   │  │     │  │   │ ["omzet", "ROI"]        │     │  │  │  │  │  │
│  │   │  │     │  │   └─────────────────────────┘     │  │  │  │  │  │
│  │   │  │     │  │ </div>                            │  │  │  │  │  │
│  │   │  │     │  └───────────────────────────────────┘  │  │  │  │  │
│  │   │  │     └─────────────────────────────────────────┘  │  │  │  │
│  │   │  │                                                   │  │  │  │
│  │   │  │     ┌─────────────────────────────────────────┐  │  │  │  │
│  │   │  │     │        AccordionItem.tsx (id="bg-2")    │  │  │  │  │
│  │   │  │     │         (collapsed - height: 0)         │  │  │  │  │
│  │   │  │     └─────────────────────────────────────────┘  │  │  │  │
│  │   │  │                                                   │  │  │  │
│  │   │  │   </div>                                         │  │  │  │
│  │   │  └──────────────────────────────────────────────────┘  │  │  │
│  │   └────────────────────────────────────────────────────────┘  │  │
│  │                                                                │  │
│  │   ┌────────────────────────────────────────────────────────┐  │  │
│  │   │ Category: "Regionale Service"                          │  │  │
│  │   │ <h3 className="sticky top-20 ...">                     │  │  │
│  │   └────────────────────────────────────────────────────────┘  │  │
│  │                                                                │  │
│  │   ┌────────────────────────────────────────────────────────┐  │  │
│  │   │              Accordion.tsx                             │  │  │
│  │   │                 (items...)                             │  │  │
│  │   └────────────────────────────────────────────────────────┘  │  │
│  │                                                                │  │
│  │   ┌────────────────────────────────────────────────────────┐  │  │
│  │   │ Call to Action                                         │  │  │
│  │   └────────────────────────────────────────────────────────┘  │  │
│  │                                                                │  │
│  │   ┌────────────────────────────────────────────────────────┐  │  │
│  │   │ <script type="application/ld+json">                    │  │  │
│  │   │   FAQPage Structured Data                              │  │  │
│  │   │ </script>                                               │  │  │
│  │   └────────────────────────────────────────────────────────┘  │  │
│  │ </div>                                                         │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

## State Flow

```
┌──────────────────────────────────────────────────────────────────┐
│                       User Interaction                           │
└──────────────────────────────────────────────────────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │  Click on Item   │
                    │  (id="bg-1")     │
                    └──────────────────┘
                              │
                              ▼
                    ┌──────────────────┐
                    │   toggleItem()   │
                    └──────────────────┘
                              │
                              ▼
              ┌───────────────────────────────┐
              │  Check current openItemId     │
              │  - If same: close (null)      │
              │  - If different: open (id)    │
              └───────────────────────────────┘
                              │
                              ▼
              ┌───────────────────────────────┐
              │  Update URL hash              │
              │  #faq=bg-1 or #               │
              └───────────────────────────────┘
                              │
                              ▼
              ┌───────────────────────────────┐
              │  Context updates openItemId   │
              └───────────────────────────────┘
                              │
                              ├─────────────────────────────┐
                              ▼                             ▼
                    ┌──────────────────┐        ┌──────────────────┐
                    │  Item bg-1       │        │  Item bg-2       │
                    │  isOpen = true   │        │  isOpen = false  │
                    └──────────────────┘        └──────────────────┘
                              │                             │
                              ▼                             ▼
                    ┌──────────────────┐        ┌──────────────────┐
                    │  useEffect       │        │  useEffect       │
                    │  measures height │        │  sets height: 0  │
                    └──────────────────┘        └──────────────────┘
                              │                             │
                              ▼                             ▼
                    ┌──────────────────┐        ┌──────────────────┐
                    │  Panel expands   │        │  Panel collapses │
                    │  with measured   │        │  with 150ms      │
                    │  height (0 CLS)  │        │  transition      │
                    └──────────────────┘        └──────────────────┘
```

## Mobile Layout (< 768px)

```
┌────────────────────────────────────────────────────────┐
│                    Viewport (100vw)                    │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Padding: px-4 (16px)                             │  │
│  │  ┌────────────────────────────────────────────┐  │  │
│  │  │ Category Header (sticky)                   │  │  │
│  │  │ "Business Growth"                          │  │  │
│  │  ├────────────────────────────────────────────┤  │  │
│  │  │ FAQ Item 1                                 │  │  │
│  │  │ ┌────────────────────────────────────────┐ │  │  │
│  │  │ │ Button (min-h-[48px])                  │ │  │  │
│  │  │ │ ┌──────────────────────┐  ┌──────────┐ │ │  │  │
│  │  │ │ │ Question text        │  │  Icon    │ │ │  │  │
│  │  │ │ │ (flex-grow)          │  │ (44x44)  │ │ │  │  │
│  │  │ │ └──────────────────────┘  └──────────┘ │ │  │  │
│  │  │ └────────────────────────────────────────┘ │  │  │
│  │  │ ┌────────────────────────────────────────┐ │  │  │
│  │  │ │ Panel (measured height)                │ │  │  │
│  │  │ │ Answer text + keywords                 │ │  │  │
│  │  │ └────────────────────────────────────────┘ │  │  │
│  │  ├────────────────────────────────────────────┤  │  │
│  │  │ FAQ Item 2 (collapsed)                     │  │  │
│  │  ├────────────────────────────────────────────┤  │  │
│  │  │ FAQ Item 3 (collapsed)                     │  │  │
│  │  └────────────────────────────────────────────┘  │  │
│  │ Padding: px-4 (16px)                             │  │
│  └──────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────┘
```

## Desktop Layout (≥ 768px)

```
┌───────────────────────────────────────────────────────────────┐
│                    Viewport (100vw)                           │
│               ┌───────────────────────┐                       │
│               │   max-w-2xl (672px)   │                       │
│               │   mx-auto (centered)  │                       │
│  ┌────────────┼───────────────────────┼────────────┐          │
│  │ Padding    │ Category Header       │ Padding    │          │
│  │ (safe)     │ "Business Growth"     │ (safe)     │          │
│  │            ├───────────────────────┤            │          │
│  │            │ FAQ Item 1            │            │          │
│  │            │ (same structure)      │            │          │
│  │            ├───────────────────────┤            │          │
│  │            │ FAQ Item 2            │            │          │
│  │            └───────────────────────┘            │          │
│  └───────────────────────────────────────────────────┘          │
└───────────────────────────────────────────────────────────────┘
```

## Keyboard Navigation Flow

```
Tab Order:
  FAQ Item 1 Button → FAQ Item 2 Button → FAQ Item 3 Button → ...

Arrow Navigation:
  ┌─────────────┐  ArrowDown   ┌─────────────┐  ArrowDown   ┌─────────────┐
  │ FAQ Item 1  │ ──────────→  │ FAQ Item 2  │ ──────────→  │ FAQ Item 3  │
  │   (focus)   │              │   (focus)   │              │   (focus)   │
  └─────────────┘  ←──────────  └─────────────┘  ←──────────  └─────────────┘
                    ArrowUp                       ArrowUp

Home: Jump to first item
End:  Jump to last item
```

## ARIA Tree

```
<div role="region" aria-label="Veelgestelde vragen">
  └── <div id="bg-1">
      ├── <h4>
      │   └── <button
      │         id="trigger-bg-1"
      │         aria-expanded="true"
      │         aria-controls="panel-bg-1"
      │         aria-label="Verberg antwoord">
      │       └── Question text
      │       └── Icon
      └── <div
            id="panel-bg-1"
            role="region"
            aria-labelledby="trigger-bg-1">
          └── Answer content
```

## Performance: Zero CLS Implementation

```
Initial State (Closed):
┌─────────────┐
│   Button    │ ← Visible, measured height
├─────────────┤
│   Panel     │ ← height: 0, opacity: 0
│  (hidden)   │
└─────────────┘

On Open (Frame 1):
┌─────────────┐
│   Button    │
├─────────────┤
│   Panel     │ ← Measure: scrollHeight = 200px
│  (measure)  │    Set: height = 200px, opacity = 0
└─────────────┘

On Open (Frame 2-10, 150ms):
┌─────────────┐
│   Button    │
├─────────────┤
│   Panel     │ ← Animate: height 0→200px, opacity 0→1
│ (expanding) │    No layout shift (height pre-set)
│             │
└─────────────┘

On Open (After 150ms):
┌─────────────┐
│   Button    │
├─────────────┤
│   Panel     │ ← Set: height = 'auto'
│  (visible)  │    Allow dynamic content changes
│   Answer    │
│  Keywords   │
└─────────────┘

CLS = 0.00 ✅
```

## Component File Sizes

```
Accordion.tsx:    ~3.2 KB raw  →  ~1.8 KB gzipped
Item.tsx:         ~5.1 KB raw  →  ~2.8 KB gzipped
index.ts:         ~0.3 KB raw  →  ~0.2 KB gzipped
───────────────────────────────────────────────────
Total:            ~8.6 KB raw  →  ~4.8 KB gzipped ✅
Budget:                          6.0 KB gzipped
Remaining:                       1.2 KB buffer
```
