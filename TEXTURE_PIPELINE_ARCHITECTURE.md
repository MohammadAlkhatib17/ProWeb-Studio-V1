# KTX2 Texture Pipeline - Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SOURCE TEXTURES                                      â”‚
â”‚  public/assets/                                                              â”‚
â”‚    â”œâ”€â”€ hero_background.png     (2.5 MB)                                     â”‚
â”‚    â”œâ”€â”€ material_wood.webp      (850 KB)                                     â”‚
â”‚    â””â”€â”€ environment_studio.png  (3.2 MB)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ node scripts/convert-textures.js
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONVERSION PROCESS                                        â”‚
â”‚                                                                              â”‚
â”‚  [toktx] KTX-Software                                                       â”‚
â”‚    â”œâ”€â”€ ETC1S compression (default)    â†’ 180 KB (~80% smaller)              â”‚
â”‚    â””â”€â”€ UASTC compression (high-qual)  â†’ 420 KB (~60% smaller)              â”‚
â”‚                                                                              â”‚
â”‚  [ImageMagick/Sharp] Fallback generation                                    â”‚
â”‚    â””â”€â”€ WebP + PNG fallbacks           â†’ 850 KB                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       OUTPUT TEXTURES                                        â”‚
â”‚  public/textures/                                                            â”‚
â”‚    â”œâ”€â”€ hero_background.ktx2    (180 KB)  âœ… Primary                        â”‚
â”‚    â”œâ”€â”€ hero_background.webp    (850 KB)  ğŸ”„ Fallback 1                     â”‚
â”‚    â”œâ”€â”€ hero_background.png     (2.5 MB)  ğŸ”„ Fallback 2                     â”‚
â”‚    â””â”€â”€ [basis/]                          ğŸ“¦ Transcoder files                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Runtime Load
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BROWSER RUNTIME                                          â”‚
â”‚                                                                              â”‚
â”‚  1. isKTX2Supported()                                                       â”‚
â”‚     â”œâ”€â”€ Check WebGL extensions                                              â”‚
â”‚     â”‚   â”œâ”€â”€ WEBGL_compressed_texture_etc1                                   â”‚
â”‚     â”‚   â”œâ”€â”€ WEBGL_compressed_texture_s3tc                                   â”‚
â”‚     â”‚   â”œâ”€â”€ WEBGL_compressed_texture_astc                                   â”‚
â”‚     â”‚   â””â”€â”€ WEBGL_compressed_texture_pvrtc                                  â”‚
â”‚     â””â”€â”€ Result: true/false                                                  â”‚
â”‚                                                                              â”‚
â”‚  2. loadTexture(path, renderer)                                             â”‚
â”‚     â”‚                                                                        â”‚
â”‚     â”œâ”€ KTX2 Supported? â”€â”€YESâ”€â”€> Load .ktx2 â”€â”€Successâ”€â”€> Return Texture    â”‚
â”‚     â”‚                              â”‚                                         â”‚
â”‚     â”‚                              â””â”€â”€Failâ”€â”                                â”‚
â”‚     â”‚                                      â”‚                                 â”‚
â”‚     â””â”€ KTX2 Not Supported â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚                                â”‚
â”‚                                           â†“â†“                                 â”‚
â”‚                                  Load .webp â”€â”€Successâ”€â”€> Return Texture    â”‚
â”‚                                        â”‚                                     â”‚
â”‚                                        â””â”€â”€Failâ”€â”€> Load .png â”€â”€> Texture    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   REACT THREE FIBER                                          â”‚
â”‚                                                                              â”‚
â”‚  useKTX2Texture('/textures/material')                                       â”‚
â”‚     â”œâ”€â”€ Calls loadTexture()                                                 â”‚
â”‚     â”œâ”€â”€ Manages lifecycle (mount/unmount)                                   â”‚
â”‚     â”œâ”€â”€ Tracks in textureMemoryMonitor                                      â”‚
â”‚     â””â”€â”€ Returns: THREE.Texture | null                                       â”‚
â”‚                                                                              â”‚
â”‚  Component Tree:                                                             â”‚
â”‚    <Canvas>                                                                  â”‚
â”‚      <EnvironmentMap path="/textures/environment/studio" />                 â”‚
â”‚      <mesh>                                                                  â”‚
â”‚        <boxGeometry />                                                       â”‚
â”‚        <meshStandardMaterial map={texture} />                               â”‚
â”‚      </mesh>                                                                 â”‚
â”‚    </Canvas>                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GPU RENDERING                                           â”‚
â”‚                                                                              â”‚
â”‚  KTX2 (Compressed)                                                          â”‚
â”‚    â””â”€> GPU Native Decompression (ETC1S/UASTC)                              â”‚
â”‚        â””â”€> Texture Memory: ~180 KB                                         â”‚
â”‚            â””â”€> Render: Zero CPU overhead                                    â”‚
â”‚                                                                              â”‚
â”‚  WebP/PNG (Fallback)                                                        â”‚
â”‚    â””â”€> CPU Decode â†’ Upload to GPU                                          â”‚
â”‚        â””â”€> Texture Memory: ~2-8 MB                                         â”‚
â”‚            â””â”€> Render: Some CPU overhead                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PERFORMANCE MONITORING                                      â”‚
â”‚                                                                              â”‚
â”‚  textureMemoryMonitor                                                       â”‚
â”‚    â”œâ”€â”€ Track all loaded textures                                            â”‚
â”‚    â”œâ”€â”€ Calculate memory usage                                               â”‚
â”‚    â””â”€â”€ Report:                                                              â”‚
â”‚        â”œâ”€â”€ Total: 8.45 MB                                                   â”‚
â”‚        â”œâ”€â”€ Compressed (KTX2): 7.12 MB                                       â”‚
â”‚        â””â”€â”€ Uncompressed (fallback): 1.33 MB                                 â”‚
â”‚                                                                              â”‚
â”‚  Draw Calls                                                                  â”‚
â”‚    â”œâ”€â”€ Without instancing: 100 meshes = 100 draw calls                     â”‚
â”‚    â””â”€â”€ With instancing: 100 meshes = 1 draw call âœ…                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


BROWSER SUPPORT MATRIX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚   Version   â”‚  KTX2 Support    â”‚   Fallback Path           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chrome       â”‚   76+       â”‚ âœ… ETC1S/UASTC  â”‚ -                         â”‚
â”‚ Firefox      â”‚   78+       â”‚ âœ… ETC1S/UASTC  â”‚ -                         â”‚
â”‚ Safari       â”‚   14+       â”‚ âœ… ETC1S        â”‚ -                         â”‚
â”‚ Edge         â”‚   79+       â”‚ âœ… ETC1S/UASTC  â”‚ -                         â”‚
â”‚ Mobile Chromeâ”‚   Latest    â”‚ âœ… ETC1S        â”‚ -                         â”‚
â”‚ iOS Safari   â”‚   14+       â”‚ âœ… ETC1S        â”‚ -                         â”‚
â”‚ Older Safari â”‚   < 14      â”‚ âŒ              â”‚ WebP â†’ PNG                â”‚
â”‚ IE 11        â”‚   Any       â”‚ âŒ              â”‚ WebP â†’ PNG                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


FILE SIZE COMPARISON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Original PNG (2048x2048)
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 2.5 MB (100%)

WebP Compressed
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 850 KB (34%)

KTX2 ETC1S
â–ˆâ–ˆâ–ˆâ–ˆ 180 KB (7.2%) â† 92.8% smaller! ğŸ‰

KTX2 UASTC
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 420 KB (16.8%) â† 83.2% smaller


MEMORY USAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Scenario: 10 textures (2048x2048 each)

PNG Uncompressed:
  Disk: 25 MB
  GPU Memory: 80 MB (RGBA, with mipmaps)
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 80 MB

KTX2 Compressed:
  Disk: 1.8 MB (â†“ 92%)
  GPU Memory: 12 MB (compressed, with mipmaps)
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 12 MB âœ… Within budget!


INSTANCING PERFORMANCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Without Instancing (100 cubes):
  Draw Calls: 100
  Performance: 45 FPS
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

With Instancing (100 cubes):
  Draw Calls: 1
  Performance: 60 FPS
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ âœ… 98% reduction!


INTEGRATION WORKFLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Developer Workflow:

  1. Add Texture          4. Use in Code
     â”‚                       â”‚
     â†“                       â†“
  2. Convert              5. Test
     â”‚                       â”‚
     â†“                       â†“
  3. Validate             6. Deploy


  [Developer] â”€â”€addsâ”€â”€> [PNG/WebP]
                            â”‚
                            â†“
              [convert-textures.js]
                            â”‚
                            â†“
              [KTX2 + WebP + PNG]
                            â”‚
                            â†“
               [validate-ktx2-pipeline.sh]
                            â”‚
                            â†“
            [useKTX2Texture() in React]
                            â”‚
                            â†“
                [Browser Runtime Load]
                            â”‚
                            â†“
                    [GPU Rendering]
                            â”‚
                            â†“
              [Performance Monitoring]


COMPONENT HIERARCHY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

src/three/
â”‚
â”œâ”€â”€ assetPipeline/               [CORE SYSTEM]
â”‚   â”œâ”€â”€ KTX2Loader.ts           â† Main loader logic
â”‚   â”œâ”€â”€ textureUtils.ts         â† Utilities
â”‚   â”œâ”€â”€ useKTX2Texture.ts       â† React hooks
â”‚   â””â”€â”€ index.ts                â† Exports
â”‚
â”œâ”€â”€ components/                  [REACT COMPONENTS]
â”‚   â”œâ”€â”€ EnvironmentMap.tsx      â† PMREM environment
â”‚   â”œâ”€â”€ TexturedMesh.tsx        â† Instanced mesh
â”‚   â””â”€â”€ index.ts                â† Exports
â”‚
â”œâ”€â”€ KTX2DemoScene.tsx           [DEMO]
â”‚
â””â”€â”€ index.tsx                    [MAIN EXPORT]


DATA FLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Source Code:
  useKTX2Texture('/textures/wood')
              â”‚
              â†“
  [React Hook] useKTX2Texture
              â”‚
              â”œâ”€> useThree() â†’ get WebGLRenderer
              â”œâ”€> useState() â†’ texture state
              â””â”€> useEffect() â†’ load on mount
              â”‚
              â†“
  [Core Loader] loadTexture(path, renderer)
              â”‚
              â”œâ”€> isKTX2Supported() â†’ check browser
              â”œâ”€> getKTX2Loader() â†’ get/create loader
              â””â”€> Cache check â†’ textureCache
              â”‚
              â†“
  [Fallback Chain]
              â”‚
              â”œâ”€â”€> Try .ktx2 â”€â”€Successâ”€â”€> âœ…
              â”‚         â”‚
              â”‚         Fail
              â”‚         â†“
              â”œâ”€â”€> Try .webp â”€â”€Successâ”€â”€> âœ…
              â”‚         â”‚
              â”‚         Fail
              â”‚         â†“
              â””â”€â”€> Try .png â”€â”€Successâ”€â”€> âœ…
                        â”‚
                        Fail
                        â†“
                     Error âŒ

Runtime Result:
  THREE.Texture â†’ Material â†’ Mesh â†’ Rendered
              â”‚
              â””â”€> textureMemoryMonitor.add(path, texture)
```

**Legend:**
- âœ… Success path
- ğŸ”„ Fallback path
- âŒ Not supported
- ğŸ“¦ Required files
- â† Primary flow
- â†’ Secondary flow
